@page "/"
@using InstanceManager.Application.Contracts
@using InstanceManager.Application.Contracts.Common
@using InstanceManager.Application.Contracts.Modules.ProjectInstance
@using Radzen.Blazor

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new Fluent Blazor app.

<button @onclick="SendTestRequest">Hello</button>

<RadzenButton Click="SendTestRequest">test btn</RadzenButton>

<textarea style="width:100%; height:400px;">
@System.Text.Json.JsonSerializer.Serialize(ProjectInstances, new System.Text.Json.JsonSerializerOptions { WriteIndented = true })
</textarea>

@code {
    [Inject]
    protected IRequestSender RequestSender { get; set; } = null!;

    protected  List<ProjectInstanceDto>ProjectInstances { get; set; } = new(); 
    
    private async Task SendTestRequest(MouseEventArgs arg)
    {
        var result = await RequestSender.SendAsync<PaginatedList<ProjectInstanceDto>>(new GetProjectInstancesQuery());
        ProjectInstances = result.Items;

        _ = 1;

        return;
    }
}
