@typeparam TItem
@using Microsoft.FluentUI.AspNetCore.Components.Icons.Regular
@using Orientation=Microsoft.FluentUI.AspNetCore.Components.Orientation

<FluentStack Orientation="Orientation.Horizontal" Style="margin-bottom: 16px;" VerticalAlignment="VerticalAlignment.Center">
    <FluentSearch Placeholder="@SearchPlaceholder"
                 @bind-Value="@SearchTerm"
                 @bind-Value:after="HandleSearchChanged"
                 Style="width: 300px;" />
    @if (!string.IsNullOrWhiteSpace(SearchTerm))
    {
        <FluentButton Appearance="Appearance.Lightweight"
                      IconStart="@(new Size20.Dismiss())"
                      OnClick="HandleClearSearch">
            Clear
        </FluentButton>
    }

    @if (AdditionalFilters != null)
    {
        @AdditionalFilters
    }

    <FluentButton IconStart="@(new Size20.Settings())" OnClick="@(() => _isSettingsPanelOpen = true)" />
</FluentStack>

<RadzenDataGrid @ref="_dataGrid"
                Data="@Items"
                LoadData="@OnLoadData"
                Count="@TotalItems"
                TItem="TItem"
                AllowFiltering="@AllowFiltering"
                AllowSorting="@AllowSorting"
                AllowPaging="@AllowPaging"
                PageSize="@PageSize"
                FilterPopupRenderMode="PopupRenderMode.OnDemand"
                SelectionMode="@SelectionMode"
                Value="@SelectedRows"
                ValueChanged="@OnSelectionChanged">
    <Columns>
        @Columns
    </Columns>
</RadzenDataGrid>

<DataGridSettings @bind-IsOpen="@_isSettingsPanelOpen"
                  Columns="@_columnStates"
                  OnSettingsChanged="HandleSettingsChanged" />
